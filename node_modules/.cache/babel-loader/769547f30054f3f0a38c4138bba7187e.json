{"ast":null,"code":"import _classCallCheck from\"C:/Users/User/books_inventory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/User/books_inventory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/User/books_inventory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/User/books_inventory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/User/books_inventory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var url=\"https://book-store-service.herokuapp.com/api/book/\";export var BookCard=/*#__PURE__*/function(_React$Component){_inherits(BookCard,_React$Component);var _super=_createSuper(BookCard);function BookCard(props){var _this;_classCallCheck(this,BookCard);_this=_super.call(this,props);_this.generateCardFooter=function(isAddedToInventory){var book={bookId:_this.props.bookId,bookTitle:_this.props.bookTitle,authors:_this.props.authors,publishedDate:_this.props.publishedDate,removeFromInventory:_this.props.removeFromInventory,noOfCopies:_this.props.noOfCopies};if(isAddedToInventory){return/*#__PURE__*/_jsxs(\"div\",{id:\"card_footer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:_this.updateInventory.bind(_assertThisInitialized(_this),book),children:\" Save \"}),/*#__PURE__*/_jsx(\"button\",{onClick:_this.removeFromInventory.bind(_assertThisInitialized(_this),book.bookId),children:\"Remove All Copies \"})]});}else return/*#__PURE__*/_jsxs(\"div\",{id:\"card_footer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:_this.addToInventory.bind(_assertThisInitialized(_this),book),children:\" Add to Inventory \"}),/*#__PURE__*/_jsx(\"p\",{children:\" No copies currently in the Inventory \"})]});};_this.addToInventory=function(book){book.noOfCopies=1;fetch(url,{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify(book)}).then(function(response){return response.json();}).then(function(){_this.setState({noOfCopies:1});});};_this.updateInventory=function(book){book.noOfCopies=_this.state.noOfCopies;fetch(url,{method:'PUT',headers:{'Content-type':'application/json'},body:JSON.stringify(book)}).then(function(response){return response.json();}).then(function(data){_this.setState({noOfCopies:data.noOfCopies});});};_this.removeFromInventory=function(bookId){fetch(url.concat(bookId),{method:'DELETE',headers:{'Content-type':'application/json'}}).then(function(response){return response.text();}).then(_this.setState({noOfCopies:0}));};_this.toggleInventoryStatus=function(bookId){_this.props.removeFromInventory.bind(_assertThisInitialized(_this),bookId);};_this.getAuthorsList=function(){var authors=_this.props.authors;if(authors!=null){return/*#__PURE__*/_jsx(\"ul\",{children:authors.map(function(author){return/*#__PURE__*/_jsx(\"li\",{children:author},author);})});}};_this.state={noOfCopies:props.noOfCopies};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(BookCard,[{key:\"render\",value:function render(){var isAddedToInventory=this.state.noOfCopies!=0;var cardFooter=this.generateCardFooter(isAddedToInventory);return/*#__PURE__*/_jsxs(\"div\",{className:\"card_wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"card_body\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"book_info\",children:[/*#__PURE__*/_jsx(\"h3\",{id:\"header_container\",children:this.props.bookTitle}),/*#__PURE__*/_jsx(\"h4\",{children:\"Authors:\"}),this.getAuthorsList(),/*#__PURE__*/_jsx(\"h4\",{children:\"Published Date:\"}),this.props.publishedDate]}),isAddedToInventory&&/*#__PURE__*/_jsxs(\"div\",{id:\"inventory_status\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Inventory Copies\"}),/*#__PURE__*/_jsx(\"input\",{id:\"noOfCopies\",type:\"number\",value:this.state.noOfCopies,onChange:this.handleChange,min:\"1\"})]})]}),cardFooter]});}},{key:\"handleChange\",value:function handleChange(e){this.setState({noOfCopies:e.target.value});}}]);return BookCard;}(React.Component);","map":{"version":3,"sources":["C:/Users/User/books_inventory/src/BookCard.js"],"names":["React","url","BookCard","props","generateCardFooter","isAddedToInventory","book","bookId","bookTitle","authors","publishedDate","removeFromInventory","noOfCopies","updateInventory","bind","addToInventory","fetch","method","headers","body","JSON","stringify","then","response","json","setState","state","data","concat","text","toggleInventoryStatus","getAuthorsList","map","author","handleChange","cardFooter","e","target","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nconst url = \"https://book-store-service.herokuapp.com/api/book/\"\r\n\r\nexport class BookCard extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            noOfCopies: props.noOfCopies\r\n        }\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    render() { \r\n        var isAddedToInventory = this.state.noOfCopies != 0;\r\n        var cardFooter = this.generateCardFooter(isAddedToInventory);\r\n        return(\r\n            <div className=\"card_wrapper\">\r\n                <div id=\"card_body\">\r\n                    <div id=\"book_info\">\r\n                        <h3 id=\"header_container\">{this.props.bookTitle}</h3>\r\n                        <h4>Authors:</h4>\r\n                        {this.getAuthorsList()}\r\n                        <h4>Published Date:</h4>{this.props.publishedDate}\r\n                    </div>\r\n                    {isAddedToInventory && \r\n                        <div id=\"inventory_status\">\r\n                            <h4>Inventory Copies</h4>\r\n                            <input id=\"noOfCopies\" type=\"number\" value={this.state.noOfCopies} \r\n                                onChange={this.handleChange} min=\"1\" />\r\n                        </div>}\r\n                </div>\r\n                {cardFooter}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    generateCardFooter = (isAddedToInventory) => {\r\n        var book = {\r\n            bookId: this.props.bookId,\r\n            bookTitle: this.props.bookTitle,\r\n            authors: this.props.authors,\r\n            publishedDate: this.props.publishedDate,\r\n            removeFromInventory: this.props.removeFromInventory,\r\n            noOfCopies: this.props.noOfCopies\r\n        }\r\n        if(isAddedToInventory) {\r\n            return (\r\n                <div id=\"card_footer\">\r\n                    <button onClick={this.updateInventory.bind(this, book)}> Save </button>\r\n                    <button onClick={this.removeFromInventory.bind(this, book.bookId)}> \r\n                        Remove All Copies </button>   \r\n                </div>\r\n            )\r\n        } else return (\r\n            <div id=\"card_footer\">\r\n                <button onClick={this.addToInventory.bind(this, book)}> Add to Inventory </button>\r\n                <p> No copies currently in the Inventory </p>   \r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({ noOfCopies: e.target.value });\r\n    }\r\n\r\n    addToInventory = (book)=> {\r\n        book.noOfCopies = 1;\r\n        fetch(url, {\r\n            method: 'POST',\r\n            headers: {'Content-type':'application/json'},\r\n            body: JSON.stringify(book)\r\n        }).then((response) => response.json())\r\n          .then(() => { this.setState({ noOfCopies: 1 }) });\r\n    }\r\n\r\n    updateInventory =(book)=> {\r\n        book.noOfCopies = this.state.noOfCopies;\r\n        fetch(url, {\r\n            method: 'PUT',\r\n            headers: {'Content-type':'application/json'},\r\n            body: JSON.stringify(book)\r\n        }).then((response) => response.json())\r\n          .then((data) => { this.setState({ noOfCopies: data.noOfCopies }) });\r\n    }\r\n\r\n    removeFromInventory =(bookId) => {\r\n        fetch(url.concat(bookId), {\r\n            method: 'DELETE',\r\n            headers: {'Content-type':'application/json'}\r\n        }).then((response) => response.text())\r\n          .then(this.setState({noOfCopies: 0}));\r\n    }\r\n\r\n    toggleInventoryStatus=(bookId)=>{\r\n        this.props.removeFromInventory.bind(this, bookId)\r\n    }\r\n\r\n    getAuthorsList=()=> {\r\n        var authors = this.props.authors;\r\n        if (authors != null) {\r\n            return(\r\n                <ul>{authors.map(author => {\r\n                    return <li key={author}>{author}</li>\r\n                    })}\r\n                </ul>\r\n            )\r\n        }\r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}